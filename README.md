# XML Parser & Database Updater

Консольное приложение для парсинга XML-файла (на самом деле формат YML^-^) и синхронизации данных с базой данных PostgreSQL

Проект полностью запускается в Docker и не требует установленной Java или PostgreSQL

---

## Возможности

* Парсинг XML с разделами:

  * `currencies`
  * `categories`
  * `offers`
* Автоматическое создание таблиц в БД
* Проверка структуры таблиц перед обновлением
* Обновление одной таблицы или всех сразу
* Просмотр списка таблиц
* Генерация DDL таблиц

---

## Стек технологий

* Java (через Groovy-скрипт)
* PostgreSQL
* Docker / Docker Compose
* JDBC

---

## ⚙️ Требования

На компьютере должен быть установлен только:

* Docker
* Docker Compose

Никаких других зависимостей не требуется.

---

## ▶️ Запуск проекта

### Сборка Docker-образа

```bash
docker compose build --no-cache
```

---

### Запуск приложения

```bash
docker compose run --rm -it updater
```

После запуска приложение отобразит интерактивное меню

---

## Консольное меню

```
1. Показать таблицы
2. Показать DDL таблицы
3. Обновить таблицу
4. Обновить все таблицы
5. Выйти
```

### Описание пунктов:

* **1 Показать таблицы**
  Выводит список таблиц, доступных в БД

* **2 Показать DDL таблицы**
  Показывает SQL структуру выбранной таблицы

* **3 Обновить таблицу**
  Обновляет данные только одной выбранной таблицы

* **4 Обновить все таблицы**
  Последовательно обновляет ВСЕ РАЗДЕЛЫ

* **5 Выйти**
  Завершает работу приложения.

---

## Особенности реализации

### Нормализация пользовательского ввода

Для корректной работы в Windows + Docker используется очистка ввода:

* удаляются BOM и спецсимволы
* приводится к lowercase

Это предотвращает ошибки вида:

```
Unknown table: offers
```

---

## Полный сброс окружения (если что-то пошло не так)

```bash
docker compose down -v
docker system prune -af
docker compose build --no-cache
docker compose run --rm -it updater
```

---

## Назначение проекта

Выполнен как тестовое задание
---

## Возможные улучшения

* Сохранение `<param>` у `offer` в JSON
* Логирование ошибок по строкам
* REST API поверх данных

---

